mode:
  # L2.5 Single-Agent Sandbox: Cursor agent may execute multi-step plans end-to-end
  cursor_agent_mode: sandboxed
  agentic_write_ops: true          # allow code/tests/docs/scripts writes
  modify_meta_framework: false     # forbid edits to meta/standards/ci
  human_review_required_for_merge: true

permissions:
  # Write permissions are project-type aware:
  # - Programming projects: frontend/, backend/, shared/
  # - Documentation projects: docs/, data/, plans/, evidence/, callables/
  # The guardrail_enforcement.py script dynamically adds documentation paths
  # based on project type detection from MVP_SPECIFICATION.yaml or ACTIVE_PLAN.yaml
  write_to:
    - frontend/
    - backend/
    - shared/
  readonly:
    - 0_phase0_bootstrap/
    - 1_global_standards/
    - 7_schemas/
    - .github/
    - 8_ci/
    - 4_docs_index/
    - 5_reference_architectures/

components:
  frontend:
    language: typescript
    package_manager: auto        # auto | npm | yarn | pnpm
    coverage_threshold: 95
    complexity_limit: 12
    directories: [frontend/]
  backend:
    language: python
    coverage_threshold: 100
    complexity_limit: 10
    directories: [backend/]
  shared:
    language: generic
    coverage_threshold: 90
    complexity_limit: 10
    directories: [shared/]

gates:
  block_on_security_critical: true
  block_on_schema_violation: true
  block_on_coverage_drop: true
  warn_on_performance_regression: true
  warn_on_mutation_drop: true

thresholds:
  mutation_kill: 75
  perf_regression_pct: 10
  max_duplication_pct: 10
  max_function_complexity: 10
  line_length: 100

ai_guardrails:
  # Project-type aware guardrails:
  # - Programming projects: All guardrails enforced (TDD, SOLID, task scope, etc.)
  # - Documentation projects: Skip TDD/SOLID (no code), enforce task scope, doc sync, commit tags
  # Guardrail enforcement automatically detects project type from MVP_SPECIFICATION.yaml or ACTIVE_PLAN.yaml
  enforce_task_scope: true  # Applies to all projects - ensures commits stay within task boundaries
  forbid_folder_creation_outside_scope: true  # Project-type aware - supports both programming and documentation structures
  enforce_tdd_cycle: true  # Programming projects only - automatically skipped for documentation projects
  enforce_solid_principles: true  # Programming projects only - automatically skipped for documentation projects
  require_doc_sync: true  # Applies to all projects - encourages documentation updates
  require_commit_plan_tags: true  # Applies to all projects - ensures traceability

# Metadata (optional but recommended)
meta:
  schema_version: "1.0.0"
  last_updated: "2024-01-01T00:00:00Z"
  author: "Project Team"

